
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playwright Vision AI Debug Report: should correctly display API data from JSONPlaceholder</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        });
    </script>
    <style>
        /* Reset box model for consistent layout */
        * {
            box-sizing: border-box;
        }

        /* --- Terminal-like styling --- */
        :root {
            --bg-color: #151718;
            --text-color: #d9d9d9;
            --heading-color: #ffffff;
            --prompt-char-color: #5fb3b3;
            --terminal-border: #303436;
            --code-bg: #1c1e1f;
            --accent-color: #7b9db4;
            --success-color: #99c794;
            --error-color: #ec5f67;
            --warn-color: #fac863;
            --purple-color: #c594c5;
            --link-color: #6699cc;
            --dim-color: #65737e;
            --selection-bg: #3e4451;
            --selection-text: #dfe1e8;
            --claude-purple: #8a56ac;
            --claude-orange: #ff9500;
            --claude-green: #28a745;
            --tab-hover: rgba(32, 34, 35, 0.8);
            --tab-active: rgba(27, 29, 30, 0.8);
        }
        
        /* Blurred background image */
        .bg-blur {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://preview.redd.it/macos-sonoma-wallpapers-5120x2160-v0-j9vwvbq8h5wb1.jpg?width=5120&format=pjpg&auto=webp&s=943e6f75b62ea11c987d13b3ba7091abecd48ab6');
            background-size: cover, cover;
            background-position: center center, center center;
            background-attachment: fixed;
            filter: blur(8px);
            -webkit-filter: blur(8px);
            transform: scale(1.05);
        }

        /* Basic styles */
        html, body {
            color: var(--text-color);
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.5;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        /* Terminal container */
        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            position: relative;
            z-index: 1;
        }

        /* Terminal section */
        .terminal-section {
            background-color: rgba(21, 23, 24, 0.85);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            margin-bottom: 2rem;
            overflow: hidden;
            border: 1px solid var(--terminal-border);
        }

        /* Terminal header */
        .terminal-header {
            background-color: rgba(28, 30, 31, 0.9);
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--terminal-border);
        }

        .terminal-title {
            color: var(--heading-color);
            font-size: 1rem;
            margin: 0;
            flex-grow: 1;
            position: relative;
            padding-left: 1.5rem;
        }

        .terminal-title::before {
            content: '●';
            position: absolute;
            left: 0;
            color: var(--claude-purple);
            font-size: 0.8em;
        }

        /* Terminal body */
        .terminal-body {
            padding: 1rem;
            overflow-x: auto;
        }

        /* Headings */
        h2, h3 {
            color: var(--heading-color);
            font-weight: 600;
            margin-top: 0;
            margin-bottom: 1rem;
            position: relative;
            padding-left: 1.25rem;
            letter-spacing: 0.01em;
        }

        h2::before, h3::before {
            content: '▶';
            position: absolute;
            left: 0;
            color: var(--claude-blue);
            font-size: 0.8em;
        }

        /* Method colors for network requests */
        .method-get { color: var(--link-color); }
        .method-post { color: var(--success-color); }
        .method-put { color: var(--warn-color); }
        .method-delete { color: var(--error-color); }
        .method-options { color: var(--purple-color); }
        
        /* Status colors */
        .status-success { color: var(--success-color); }
        .status-redirect { color: var(--warn-color); }
        .status-error { color: var(--error-color); }

        /* Link styles */
        a {
            color: var(--link-color);
            text-decoration: none;
            transition: all 0.2s ease;
        }

        a:hover {
            text-decoration: underline;
            opacity: 0.9;
        }

        /* List styles */
        ul, ol {
            padding-left: 1.5rem;
            margin: 0.5rem 0 1rem;
        }

        li {
            margin-bottom: 0.25rem;
        }

        /* Table styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        thead {
            background-color: rgba(28, 30, 31, 0.8);
            color: var(--heading-color);
        }

        th, td {
            padding: 0.5rem 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--terminal-border);
        }

        tr:hover {
            background-color: rgba(255, 255, 255, 0.02);
        }

        /* Button styling */
        button {
            background-color: var(--code-bg);
            color: var(--accent-color);
            border: 1px solid var(--terminal-border);
            border-radius: 4px;
            padding: 0.25rem 0.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        button:hover {
            background-color: var(--accent-color);
            color: var(--bg-color);
        }

        /* Utility classes */
        .hidden { display: none; }
        .mt-4 { margin-top: 1rem; }
        .mb-4 { margin-bottom: 1rem; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .overflow-x-auto { overflow-x: auto; }
        .text-xs { font-size: 0.75rem; }
        .text-sm { font-size: 0.875rem; }
        .text-purple { color: var(--purple-color); }
        .text-dim { color: var(--dim-color); }
        .text-success { color: var(--success-color); }
        .text-error { color: var(--error-color); }
        .text-warn { color: var(--warn-color); }
        .text-link { color: var(--link-color); }

        /* Input style */
        input[type="text"] {
            background-color: rgba(28, 30, 31, 0.7);
            color: var(--text-color);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            padding: 0.5rem;
            border: 1px solid var(--terminal-border);
            border-radius: 4px;
            width: 100%;
            margin-bottom: 0.5rem;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--claude-purple);
            box-shadow: 0 0 0 2px rgba(138, 86, 172, 0.3);
        }

        /* Filter button styles */
        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .filter-btn {
            padding: 4px 8px;
            border-radius: 4px;
            background-color: rgba(40, 42, 44, 0.8);
            color: var(--text-color);
            border: 1px solid var(--terminal-border);
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }

        .filter-btn:hover {
            background-color: rgba(60, 62, 64, 0.8);
        }

        .filter-btn.active-filter {
            background-color: var(--claude-purple);
            color: white;
        }

        .error-filter.active-filter {
            background-color: var(--error-color);
            color: white;
        }

        /* AI content area */
        .ai-content-area p { 
            margin-bottom: 0.75rem;
            margin-top: 0.5rem;
            line-height: 1.6;
        }
        
        /* Enhanced bullet points and list styling for AI analysis */
        .ai-content-area ul {
            padding-left: 1.5rem;
            margin: 0.8rem 0 1.2rem;
        }
        
        .ai-content-area ul li {
            margin-bottom: 0.6rem;
            position: relative;
            padding-left: 0.5rem;
            list-style-type: none;
        }
        
        .ai-content-area ul li::before {
            content: "✦";
            color: var(--claude-green);
            position: absolute;
            left: -1.2rem;
            font-weight: bold;
        }
        
        /* Improved section separation */
        .ai-content-area hr {
            border: none;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--claude-purple) 50%, transparent);
            margin: 1rem 0px 2rem
        }
        
        /* Enhanced heading styling */
        .ai-content-area h3 {
            color: var(--claude-orange);
        }
        
        /* Code block highlighting */
        .ai-content-area code { 
            background-color: rgba(28, 30, 31, 0.7); 
            padding: 2px 4px; 
            border-radius: 3px; 
            font-size: 0.9em; 
            color: var(--claude-blue);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .ai-content-area pre { 
            background-color: rgba(28, 30, 31, 0.7);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }
        
        .ai-content-area pre code { 
            background: none; 
            padding: 0; 
            border: none;
        }
        
        .ai-highlight {
            background-color: rgba(138, 86, 172, 0.3);
            border-radius: 2px;
            padding: 0 2px;
        }

        /* Tabs styling */
        .tabs-container {
            display: flex;
            flex-direction: column;
            width: 100%;
        }

        .tab-buttons {
            overflow-x: auto;
            border-bottom: 1px solid var(--terminal-border);
            padding-left: 1rem;
            padding-right: 1rem;
            padding-bottom: 0.5rem;
        }

        .tab-button {
            padding: 0.75rem 1.25rem;
            background-color: transparent;
            color: var(--dim-color);
            border: none;
            border-bottom: 2px solid transparent;
            border-radius: 7px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tab-button:hover {
            color: var(--heading-color);
            background-color: var(--tab-hover);
            border-radius: 7px;
        }

        .tab-button.active {
            color: var(--heading-color);
            border-bottom: 2px solid var(--claude-purple);
            background-color: var(--tab-active);
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--claude-purple);
        }

        .tab-button:focus {
            outline: none;
        }

        .tab-content {
            display: none;
            padding: 1rem;
        }

        .tab-content.active {
            display: block;
        }

        .view-btn {
            padding: 5px 10px;
            border-radius: 4px;
        }

        .badge {
            font-size: 0.65rem;
            padding: 0.1rem 0.4rem;
            border-radius: 10px;
            margin-left: 0.5rem;
            display: inline-block;
            vertical-align: middle;
            text-align: center;
        }

        .badge-error {
            background-color: var(--error-color);
            color: white;
        }

        .badge-warning {
            background-color: var(--warn-color);
            color: var(--bg-color);
        }

        .badge-info {
            background-color: var(--link-color);
            color: white;
        }

        /* Code styling */
        code, pre {
            font-family: 'JetBrains Mono', monospace;
        }

        code {
            border-radius: 4px;
        }

        /* Override highlight.js backgrounds while preserving syntax highlighting */
        .hljs {
            background: transparent !important; /* Remove hljs background */
        }

        pre {
            background-color: rgba(28, 30, 31, 0.7);
            border-radius: 6px;
            padding: 0.75rem;
            margin: 0.75rem 0;
            overflow-x: auto;
            border: 1px solid var(--claude-purple);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }

        code.error-block-code {
            display: block;
            background-color: rgba(236, 95, 103, 0.1);
            color: var(--error-color);
            padding: 0.75rem;
            border-radius: 4px;
            border-left: 2px solid var(--error-color);
            white-space: pre-wrap;
            word-break: break-all;
        }

        /* Command styling (Claude Code specific) */
        .command-input::before {
            content: "$ ";
            color: var(--claude-green);
            font-weight: bold;
        }

        /* Claude Code thinking style */
        .thinking {
            color: var(--claude-orange);
            font-style: italic;
        }

        /* Sub tabs for filtering AI content */
        .ai-filter-tabs {
            display: flex;
            overflow-x: auto;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--terminal-border);
            padding-bottom: 0.5rem;
        }

        .ai-filter-btn {
            padding: 4px 12px;
            margin-right: 4px;
            border-radius: 7px;
            background-color: rgba(40, 42, 44, 0.8);
            color: var(--text-color);
            border: 1px solid var(--terminal-border);
            border-bottom: none;
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }

        .ai-filter-btn:hover {
            background-color: rgba(60, 62, 64, 0.8);
        }

        .ai-filter-btn.active-filter {
            background-color: var(--claude-purple);
            color: white;
        }

        /* Card styling */
        .card {
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .card-header {
            background-color: rgba(37, 39, 40, 0.8);
            border-radius: 7px;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--claude-orange);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            color: var(--claude-orange);
            font-size: 0.9rem;
            margin: 0;
            font-weight: 500;
        }

        .card-body {
            padding: 1rem;
        }

        /* Dividers */
        .divider {
            height: 1px;
            width: 100%;
            background-color: var(--terminal-border);
            margin: 1rem 0;
        }

        /* Mobile responsive - adjust layout for small screens */
        @media (max-width: 640px) {
            .tab-buttons {
                flex-wrap: wrap;
            }

            .tab-button {
                border-radius: 7px;
                flex: 1 1 auto;
                padding: 0.5rem;
                font-size: 0.75rem;
                text-align: center;
            }

            .filter-buttons {
                flex-wrap: wrap;
            }

            .filter-btn {
                flex: 1 1 auto;
                text-align: center;
                font-size: 0.7rem;
                padding: 3px 6px;
            }
        }
    </style>
</head>
<body>
    <div class="bg-blur"></div>
    <main>
        <section class="terminal-section">
            <div class="terminal-header">
                <h2 class="terminal-title">Playwright Vision AI Debugger</h2>
            </div>
            <div class="terminal-body">
                <div class="tabs-container">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="overview">Test Overview</button>
                        <button class="tab-button" data-tab="error">Error Details <span class="badge badge-error">1</span></button>
                        <button class="tab-button" data-tab="ai">AI Analysis</button>
                        <button class="tab-button" data-tab="network">Network Requests <span class="badge badge-info">1</span></button>
                        <button class="tab-button" data-tab="usage">Usage Info</button>
                    </div>
                    <!-- Test Overview Tab -->
                    <div class="tab-content active" id="overview-tab">
                        <div class="card mt-4">
                            <div class="card-header">
                                <h3 class="card-title">Test Information</h3>
                            </div>
                            <div class="card-body">
                                <p><strong>Test:</strong> should correctly display API data from JSONPlaceholder</p>
                                <p><strong>File:</strong> my-feature.spec.ts</p>
                                <p><strong>Browser:</strong> chromium</p>
                                <p><strong>Status:</strong> <span class="text-error">failed</span></p>
                                <p><strong>Duration:</strong> 5242ms</p>
                            </div>
                        </div>

                        

                        
                        <div class="card mt-4">
                            <div class="card-header">
                                <h3 class="card-title">Test Code</h3>
                            </div>
                            <div class="card-body">
                                <pre><code class="language-javascript">import { test, expect } from &#039;./ai-test-base&#039;;

// Test that would fail due to network request issues - the AI should be able to identify
// that the failure is related to API data not matching expectations
test(&#039;should correctly display API data from JSONPlaceholder&#039;, async ({ page }) =&gt; {
  // Set up request interception for API calls to JSONPlaceholder
  await page.route(&#039;**/posts/**&#039;, async route =&gt; {
    // Modify the response to simulate an API issue
    const json = {
      id: 1,
      title: &quot;Modified API Response&quot;,
      body: &quot;This is a modified response that will cause the test to fail&quot;,
      userId: 999 // Modified userId that won&#039;t match expectations
    };
    
    await route.fulfill({
      status: 200,
      contentType: &#039;application/json&#039;,
      body: JSON.stringify(json)
    });
    
    console.log(&#039;Intercepted and modified API response&#039;);
  });

  // Navigate to JSONPlaceholder demo site
  await page.goto(&#039;https://jsonplaceholder.typicode.com/posts/1&#039;);
  
  // Wait for API data to load
  await page.waitForSelector(&#039;pre&#039;);
  
  // The test should fail here because we&#039;ve modified the API response
  // and the userId no longer matches what we expect
  try {
    await expect(page.getByText(&#039;&quot;userId&quot;: 1&#039;)).toBeVisible({
      timeout: 5000
    });
  } catch (error) {
    // Throw a custom error message that will be captured by the AI debugger
    throw new Error(&#039;Expected to find userId: 1 in the response, but it was modified by our API interceptor&#039;);
  }
});

</code></pre>
                            </div>
                        </div>
                    </div>
                    <!-- Error Details Tab -->
                    <div class="tab-content" id="error-tab">
                        <div class="card mt-4">
                            <div class="card-header">
                                <h3 class="card-title">Error Information</h3>
                            </div>
                            <div class="card-body">
                                <p><strong class="text-error">Error Message:</strong></p>
                                <code class="error-block-code">Error: Expected to find userId: 1 in the response, but it was modified by our API interceptor</code>
                                
                                
                                <div class="mt-4">
                                    <details>
                                        <summary>Show Stack Trace</summary>
                                        <pre><code class="language-javascript">Error: Expected to find userId: 1 in the response, but it was modified by our API interceptor
    at /Users/nklars0/Projects/PlaywrightVisionAI/my-feature.spec.ts:39:11</code></pre>
                                    </details>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- AI Analysis Tab -->
                    <div class="tab-content" id="ai-tab">
                        <div class="mb-4">
                            <div class="ai-filter-tabs">
                                <button class="ai-filter-btn active-filter" data-filter="all" onclick="filterAiContent('all')">All</button>
                                <button class="ai-filter-btn" data-filter="root-cause" onclick="filterAiContent('root-cause')">Root Cause</button>
                                <button class="ai-filter-btn" data-filter="solution" onclick="filterAiContent('solution')">Solutions</button>
                                <button class="ai-filter-btn" data-filter="debugging" onclick="filterAiContent('debugging')">Debugging Steps</button>
                                <button class="ai-filter-btn" data-filter="code" onclick="filterAiContent('code')">Code Examples</button>
                            </div>
                        </div>
                        <div id="aiContentContainer" class="ai-content-area">
                            <h3>Element Identification</h3>
<p>The target element is the <code>&lt;pre&gt;</code> element containing the JSON response from the API. It displays the entire JSON object as text within the browser window.  The screenshot shows the modified JSON response, where the <code>userId</code> is 999 instead of the expected 1.</p>
<hr>
<h3>Suggested Locators</h3>
<ol>
<li><p><strong>User-Facing (Text):</strong> <code>page.getByText(&#39;{\\&quot;id\\&quot;:1,\\&quot;title\\&quot;:\\&quot;Modified API Response\\&quot;,\\&quot;body\\&quot;:\\&quot;This is a modified response that will cause the test to fail\\&quot;,\\&quot;userId\\&quot;:999}&#39;)</code></p>
<ul>
<li>Reasoning: This locator targets the entire JSON string.  It&#39;s specific but might be brittle if the entire response changes. Escape characters are necessary for the JSON string.</li>
</ul>
</li>
<li><p><strong>CSS (Tag):</strong> <code>page.locator(&#39;pre&#39;)</code></p>
<ul>
<li>Reasoning: This locator targets the <code>&lt;pre&gt;</code> tag. Simple and less brittle than targeting the full text, but might not be unique if multiple <code>&lt;pre&gt;</code> tags exist on the page.</li>
</ul>
</li>
<li><p><strong>Combination:</strong> <code>page.locator(&#39;pre&#39;).filter({ hasText: &#39;&quot;userId&quot;: 999&#39; })</code></p>
<ul>
<li>Reasoning: This combines the tag selector with a partial text match, offering a balance between robustness and specificity. It targets the <code>&lt;pre&gt;</code> tag and filters it to the one containing the modified userId.</li>
</ul>
</li>
</ol>
<hr>
<h3>Failure Explanation</h3>
<p>The original selector (<code>N/A</code> in this case, but implied to be <code>page.getByText(&#39;&quot;userId&quot;: 1&#39;)</code>) failed because the API response was intercepted and modified. The <code>userId</code> in the response is 999, not 1 as expected by the test. The network activity (specifically the intercepted request) confirms this modification.  The error message &quot;Expected to find userId: 1 in the response, but it was modified by our API interceptor&quot; explicitly states this.</p>
<hr>
<h3>Test Improvement Suggestions</h3>
<ul>
<li><strong>Replace <code>page.waitForSelector(&#39;pre&#39;)</code> with a more robust wait:</strong>  Instead of waiting for the <code>&lt;pre&gt;</code> element to appear, wait for the specific API response data. This makes the test less flaky and more directly tied to the data being tested.</li>
</ul>
<pre><code class="language-javascript">await expect(page.locator(&#39;pre&#39;)).toContainText(&#39;&quot;userId&quot;: 999&#39;); // Use the modified userId
</code></pre>
<ul>
<li><strong>Improve assertion:</strong>  The original assertion tries to check visibility, but the real failure is the incorrect data.  Assert directly on the content of the <code>&lt;pre&gt;</code> element.</li>
</ul>
<pre><code class="language-javascript">const preText = await page.locator(&#39;pre&#39;).textContent();
const jsonResponse = JSON.parse(preText);
expect(jsonResponse.userId).toBe(999); // Assert on the parsed JSON data
</code></pre>
<ul>
<li><p><strong>Remove unnecessary <code>try...catch</code> and custom error:</strong> Playwright&#39;s <code>expect</code> will handle the assertion failure and provide a clear error message. The custom error is redundant.</p>
</li>
<li><p><strong>Refactor for clarity:</strong> Separate the API interception logic from the assertion logic. This improves readability and maintainability.</p>
</li>
</ul>
<pre><code class="language-javascript">// ... (Interception logic remains the same)

// Assertions
const preText = await page.locator(&#39;pre&#39;).textContent();
const jsonResponse = JSON.parse(preText);
expect(jsonResponse.userId).toBe(999);
</code></pre>
<ul>
<li><strong>Consider mocking the API:</strong> For more controlled testing, consider mocking the API response entirely instead of intercepting and modifying it. This isolates the test from external dependencies and makes it more deterministic.</li>
</ul>
<p>By implementing these suggestions, the test will be more reliable, easier to understand, and more focused on verifying the correct behavior.</p>

                        </div>
                    </div>
                    <!-- Network Requests Tab -->
                    <div class="tab-content" id="network-tab">
                        <div class="card-header">
                            <h2 class="card-title">Network Requests</h2>
                        </div>
                        <div class="mb-4">
                            <input type="text" id="networkSearch" placeholder="Search network requests..." 
                                onkeyup="filterNetworkRequests()">
                            <div class="filter-buttons">
                                <button class="filter-btn active-filter" data-filter="all" onclick="filterByType('all')">All</button>
                                <button class="filter-btn" data-filter="xhr" onclick="filterByType('xhr')">XHR</button>
                                <button class="filter-btn" data-filter="fetch" onclick="filterByType('fetch')">Fetch</button>
                                <button class="filter-btn" data-filter="document" onclick="filterByType('document')">Document</button>
                                <button class="filter-btn" data-filter="stylesheet" onclick="filterByType('stylesheet')">CSS</button>
                                <button class="filter-btn" data-filter="script" onclick="filterByType('script')">JS</button>
                                <button class="filter-btn" data-filter="image" onclick="filterByType('image')">Images</button>
                                <button class="filter-btn error-filter" onclick="filterByStatus('error')">Errors</button>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table id="networkTable">
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Type</th>
                                        <th>URL</th>
                                        <th>Status</th>
                                        <th>Content-Type</th>
                                        <th>Details</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="network-row" data-type="document" data-url="https://jsonplaceholder.typicode.com/posts/1" data-status="200">
                                        <td class="method-get">GET</td>
                                        <td class="text-purple">document</td>
                                        <td class="font-mono text-xs" style="max-width: 250px; word-break: break-all;">https://jsonplaceholder.typicode.com/posts/1</td>
                                        <td class="status-success">200</td>
                                        <td class="font-mono text-xs">application/json</td>
                                        <td>
                                            <button class="view-btn" onclick="toggleDetails('request-0')">View</button>
                                        </td>
                                    </tr>
                                    <tr id="request-0" class="hidden">
                                        <td colspan="6">
                                            <div class="text-xs">
                                                
                                                
                                                <div class="mb-4">
                                                    <strong class="text-success">Response Body:</strong>
                                                    <pre><code>{
  &quot;id&quot;: 1,
  &quot;title&quot;: &quot;Modified API Response&quot;,
  &quot;body&quot;: &quot;This is a modified response that will cause the test to fail&quot;,
  &quot;userId&quot;: 999
}</code></pre>
                                                </div>
                                                
                                                <div>
                                                    <strong class="text-warn">Request Headers:</strong>
                                                    <pre><code>{
  &quot;accept&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7&quot;,
  &quot;accept-language&quot;: &quot;en-US&quot;,
  &quot;upgrade-insecure-requests&quot;: &quot;1&quot;,
  &quot;user-agent&quot;: &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/134.0.6998.35 Safari/537.36&quot;,
  &quot;sec-ch-ua&quot;: &quot;\&quot;Chromium\&quot;;v=\&quot;134\&quot;, \&quot;Not:A-Brand\&quot;;v=\&quot;24\&quot;, \&quot;HeadlessChrome\&quot;;v=\&quot;134\&quot;&quot;,
  &quot;sec-ch-ua-mobile&quot;: &quot;?0&quot;,
  &quot;sec-ch-ua-platform&quot;: &quot;\&quot;macOS\&quot;&quot;
}</code></pre>
                                                </div>
                                                
                                                <div class="mt-4">
                                                    <strong class="text-warn">Response Headers:</strong>
                                                    <pre><code>{
  &quot;content-length&quot;: &quot;123&quot;,
  &quot;content-type&quot;: &quot;application/json&quot;
}</code></pre>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-4">
                            <details>
                                <summary>Network Stats</summary>
                                <div class="card mt-2">
                                    <div class="card-body">
                                        <p><strong>Total Requests:</strong> 1</p>
                                        <p><strong>Request Types:</strong> document (1)</p>
                                        <p><strong>Status Codes:</strong> 2xx (1)</p>
                                    </div>
                                </div>
                            </details>
                        </div>
                    </div>
                    <!-- Usage Info Tab -->
                    <div class="tab-content" id="usage-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">AI Model Details</h3>
                            </div>
                            <div class="card-body">
                                <p><strong>Model:</strong> gemini-1.5-pro-latest</p>
                                <p><strong>Provider:</strong> Google Generative AI</p>
                                <div id="usageContentContainer">
                                    <table>
<thead>
<tr>
<th>Category</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Model</strong></td>
<td>gemini-1.5-pro-latest</td>
</tr>
<tr>
<td><strong>Total Tokens</strong></td>
<td>2,118</td>
</tr>
<tr>
<td><strong>Prompt Tokens</strong></td>
<td>1,328</td>
</tr>
<tr>
<td><strong>Comp. Tokens</strong></td>
<td>790</td>
</tr>
<tr>
<td><strong>Est. Cost</strong></td>
<td>$0.0129 USD</td>
</tr>
</tbody></table>
<p><em>Pricing as of March 2025. Check <a href="https://ai.google.dev/pricing">ai.google.dev/pricing</a> for latest rates.</em></p>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <script>
        // Tab switching
        document.addEventListener('DOMContentLoaded', function() {
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Get the tab ID from the data-tab attribute
                    const tabId = this.dataset.tab;
                    
                    // Remove active class from all buttons and tabs
                    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding tab
                    this.classList.add('active');
                    document.getElementById(tabId + '-tab').classList.add('active');
                });
            });
            
            // Apply styles to filter buttons
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                if (btn.classList.contains('active-filter')) {
                    btn.style.backgroundColor = 'var(--claude-purple)';
                    btn.style.color = 'white';
                }
            });
            
            // Apply styles to AI filter buttons
            const aiFilterButtons = document.querySelectorAll('.ai-filter-btn');
            aiFilterButtons.forEach(btn => {
                if (btn.classList.contains('active-filter')) {
                    btn.style.backgroundColor = 'var(--claude-purple)';
                    btn.style.color = 'white';
                }
            });
        });
        
        // Toggle request details
        function toggleDetails(id) {
            const element = document.getElementById(id);
            if (element.classList.contains('hidden')) {
                element.classList.remove('hidden');
            } else {
                element.classList.add('hidden');
            }
        }
        
        // Network request filtering functions
        function filterNetworkRequests() {
            const searchText = document.getElementById('networkSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#networkTable tbody tr.network-row');
            
            rows.forEach(row => {
                const url = row.getAttribute('data-url').toLowerCase();
                const detailsRowId = 'request-' + (row.rowIndex - 2);
                const detailsRow = document.getElementById(detailsRowId);
                
                // If the search text is found in the URL
                if (url.includes(searchText)) {
                    row.style.display = '';
                    // Also handle any open detail rows
                    if (detailsRow && !detailsRow.classList.contains('hidden')) {
                        detailsRow.style.display = '';
                    }
                } else {
                    row.style.display = 'none';
                    // Also hide any open detail rows
                    if (detailsRow) {
                        detailsRow.style.display = 'none';
                    }
                }
            });
        }
        
        function filterByType(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.getAttribute('data-filter') === type) {
                    btn.classList.add('active-filter');
                    btn.style.backgroundColor = 'var(--claude-purple)';
                    btn.style.color = 'white';
                } else {
                    btn.classList.remove('active-filter');
                    btn.style.backgroundColor = '';
                    btn.style.color = '';
                }
                
                if (btn.classList.contains('error-filter')) {
                    btn.classList.remove('active-filter');
                    btn.style.backgroundColor = '';
                    btn.style.color = '';
                }
            });
            
            const rows = document.querySelectorAll('#networkTable tbody tr.network-row');
            rows.forEach(row => {
                const rowType = row.getAttribute('data-type');
                const detailsRowId = 'request-' + (row.rowIndex - 2);
                const detailsRow = document.getElementById(detailsRowId);
                
                if (type === 'all' || rowType === type) {
                    row.style.display = '';
                    if (detailsRow && !detailsRow.classList.contains('hidden')) {
                        detailsRow.style.display = '';
                    }
                } else {
                    row.style.display = 'none';
                    if (detailsRow) {
                        detailsRow.style.display = 'none';
                    }
                }
            });
        }
        
        function filterByStatus(status) {
            const rows = document.querySelectorAll('#networkTable tbody tr.network-row');
            rows.forEach(row => {
                const status = parseInt(row.getAttribute('data-status') || '0');
                const detailsRowId = 'request-' + (row.rowIndex - 2);
                const detailsRow = document.getElementById(detailsRowId);
                
                if (status >= 400) {
                    row.style.display = '';
                    if (detailsRow && !detailsRow.classList.contains('hidden')) {
                        detailsRow.style.display = '';
                    }
                } else {
                    row.style.display = 'none';
                    if (detailsRow) {
                        detailsRow.style.display = 'none';
                    }
                }
            });
        }
        
        // AI content filtering functions
        function searchAiContent() {
            const searchText = document.getElementById('aiSearchInput').value.toLowerCase();
            const container = document.getElementById('aiContentContainer');
            
            if (!searchText.trim()) {
                // If search is empty, show everything and reset highlighting
                showAllAiSections();
                return;
            }
            
            // Extract all headings and paragraphs for text search
            const contentElements = container.querySelectorAll('h1, h2, h3, h4, h5, h6, p, li, code');
            
            // Track if we found any matches
            let foundMatch = false;
            
            contentElements.forEach(element => {
                const text = element.textContent.toLowerCase();
                
                // Check if this element contains the search text
                if (text.includes(searchText)) {
                    // Make sure this element and all its parents are visible
                    let parent = element;
                    while (parent && parent !== container) {
                        if (parent.style) parent.style.display = '';
                        parent = parent.parentElement;
                    }
                    
                    // Highlight the matching text
                    const originalHTML = element.innerHTML;
                    const regex = new RegExp('(' + searchText + ')', 'gi');
                    element.innerHTML = originalHTML.replace(regex, '<mark class="ai-highlight">$1</mark>');
                    
                    foundMatch = true;
                } else if (element.style) {
                    // Hide non-matching elements
                    element.style.display = 'none';
                }
            });
            
            // If no match found, show a message
            if (!foundMatch) {
                const noResults = document.createElement('p');
                noResults.textContent = 'No results found for "' + searchText + '"';
                noResults.classList.add('text-dim');
                noResults.id = 'ai-no-results';
                
                // Remove any existing no-results message
                const existingMessage = document.getElementById('ai-no-results');
                if (existingMessage) existingMessage.remove();
                
                container.prepend(noResults);
            } else {
                // Remove any existing no-results message
                const existingMessage = document.getElementById('ai-no-results');
                if (existingMessage) existingMessage.remove();
            }
        }
        
        function showAllAiSections() {
            const container = document.getElementById('aiContentContainer');
            const allElements = container.querySelectorAll('*');
            
            allElements.forEach(el => {
                if (el.style) el.style.display = '';
            });
            
            // Remove any existing no-results message
            const existingMessage = document.getElementById('ai-no-results');
            if (existingMessage) existingMessage.remove();
        }
        
        function filterAiContent(type) {
            // Update active button state
            const buttons = document.querySelectorAll('.ai-filter-btn');
            buttons.forEach(btn => {
                if (btn.getAttribute('data-filter') === type) {
                    btn.classList.add('active-filter');
                    btn.style.backgroundColor = 'var(--claude-purple)';
                    btn.style.color = 'white';
                } else {
                    btn.classList.remove('active-filter');
                    btn.style.backgroundColor = '';
                    btn.style.color = '';
                }
            });
            
            // Reset search field
            document.getElementById('aiSearchInput').value = '';
            
            // Show all sections first
            showAllAiSections();
            
            // If 'all' is selected, we're done
            if (type === 'all') return;
            
            const container = document.getElementById('aiContentContainer');
            
            // Depending on the filter, show/hide relevant sections
            switch(type) {
                case 'root-cause':
                    highlightSections(['root cause', 'issue', 'problem', 'error', 'failure', 'bug']);
                    break;
                case 'solution':
                    highlightSections(['solution', 'fix', 'resolve', 'recommendation', 'suggest']);
                    break;
                case 'debugging':
                    highlightSections(['debug', 'step', 'investigate', 'check', 'verify', 'test']);
                    break;
                case 'code':
                    // Show all code blocks
                    const codeBlocks = container.querySelectorAll('pre, code');
                    codeBlocks.forEach(block => {
                        // Make the code block and its container visible
                        let parent = block;
                        while (parent && parent !== container) {
                            if (parent.style) parent.style.display = '';
                            parent = parent.parentElement;
                        }
                    });
                    
                    // Hide elements that don't contain code
                    const nonCodeElements = container.querySelectorAll('p, li, h1, h2, h3, h4, h5, h6');
                    nonCodeElements.forEach(el => {
                        if (!el.querySelector('code') && !el.closest('pre')) {
                            el.style.display = 'none';
                        }
                    });
                    break;
            }
            
            // Helper function to highlight sections with specific keywords
            function highlightSections(keywords) {
                // Get all section elements - each section starts with an h3 and ends at the next h3 or end of container
                const sections = [];
                const headings = container.querySelectorAll('h3');
                
                headings.forEach((heading, index) => {
                    // Create a section object with the heading and all elements until next heading
                    const section = {
                        heading: heading,
                        elements: []
                    };
                    
                    // Get all elements after this heading until the next heading
                    let currentElement = heading.nextElementSibling;
                    while (currentElement && currentElement.tagName !== 'H3') {
                        section.elements.push(currentElement);
                        currentElement = currentElement.nextElementSibling;
                    }
                    
                    // Add this section to our sections array
                    sections.push(section);
                });
                
                // Now filter each section based on keywords
                sections.forEach(section => {
                    // Get the text content of the entire section
                    let sectionText = section.heading.textContent.toLowerCase();
                    section.elements.forEach(el => {
                        sectionText += ' ' + el.textContent.toLowerCase();
                    });
                    
                    let shouldShow = false;
                    for (const keyword of keywords) {
                        if (sectionText.includes(keyword)) {
                            shouldShow = true;
                            break;
                        }
                    }
                    
                    if (!shouldShow) {
                        // Hide this section
                        section.heading.style.display = 'none';
                        section.elements.forEach(el => {
                            el.style.display = 'none';
                        });
                    }
                });
            }
        }

        // Initialize highlightjs after DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
            
            // Apply card-header styling to headings in the AI Analysis tab
            const aiContainer = document.getElementById('aiContentContainer');
            if (aiContainer) {
                const h3Elements = aiContainer.querySelectorAll('h3');
                h3Elements.forEach(h3 => {
                    // Create a new div with the card-header class
                    const headerDiv = document.createElement('div');
                    headerDiv.className = 'card-header';
                    
                    // Clone the h3 and add the card-title class
                    const newHeading = h3.cloneNode(true);
                    newHeading.className = 'card-title';
                    
                    // Insert the heading into the header div
                    headerDiv.appendChild(newHeading);
                    
                    // Replace the original h3 with the header div
                    h3.parentNode.insertBefore(headerDiv, h3);
                    h3.remove();
                });
            }
        });
    </script>
</body>
</html>